# test.yaml
listener:
  interface: "lo"       # Escuchar solo en loopback (127.0.0.1)
  port: 3001
  listen_ip: "127.0.0.1" # Forzar escucha en IP local

logging:
  log_level: "debug"    # Veremos todo lo que pasa en la consola

users:
  - name: "tester_local"
    # La clave pública que me has proporcionado
    public_key: "KbZ6k5mCxARu3722B7M+dyEyHFfrc1BjBpYswF7t/mw="
    actions:
      - "write-test"
    source_ips:
      - "127.0.0.1/32"  # Solo permitir origen local

actions:
  "write-test":
    # El comando usa los parámetros definidos en el template.
    # IMPORTANTE: Los valores de los parámetros deben cumplir la regex ^[a-zA-Z0-9._-]+$
    command: 'echo "Este es el parametro1={{.Params.p1}}, parametro2={{.Params.p2}}, parametro3={{.Params.p3}}" > /tmp/prueba.txt'
    timeout_seconds: 2
    cooldown_seconds: 0 # Sin espera para poder testear rápido
